(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2775f6bf"],{8644:function(t,i,h){"use strict";var o=h("e8c4"),s=h.n(o);s.a},b2aa:function(t,i,h){"use strict";h.r(i);var o=function(){var t=this,i=t.$createElement,h=t._self._c||i;return h("div",{staticClass:"snake"},[h("div",{staticClass:"box"},[h("h2",[t._v(t._s(6===t.snakeCount?"贪吃蛇":"蛇长度"+(t.snakeCount-6)))]),h("p",[t._v("小键盘 上下左右 操作")]),h("canvas",{ref:"canvasDom"}),h("div",{staticClass:"btn"},[h("fx-select",{attrs:{disable:null!==t.timer,data:t.diffData},model:{value:t.difficult,callback:function(i){t.difficult=i},expression:"difficult"}}),h("fx-button",{attrs:{type:"default"},on:{clickEvt:t.start}},[t._v(t._s(null===t.timer?"开始":"重置"))]),h("fx-button",{attrs:{type:"default"},on:{clickEvt:function(i){t.isGrid=!t.isGrid}}},[t._v(t._s(t.isGrid?"无格":"格子"))]),h("fx-button",{attrs:{type:"default"},on:{clickEvt:function(i){t.isAI=!t.isAI}}},[t._v(t._s(t.isAI?"手动":"自动"))])],1),t.Utils.isPC()?t._e():h("div",{staticClass:"op"},[h("em",{on:{click:function(i){return i.stopPropagation(),t.operating(37)}}},[t._v("左")]),h("span",[h("em",{on:{click:function(i){return i.stopPropagation(),t.operating(38)}}},[t._v("上")]),h("em",{on:{click:function(i){return i.stopPropagation(),t.operating(40)}}},[t._v("下")])]),h("em",{on:{click:function(i){return i.stopPropagation(),t.operating(39)}}},[t._v("右")])])])])},s=[],e=(h("cb29"),h("45fc"),h("a9e3"),{w:80,h:80}),a={name:"snake",data:function(){return{context:null,lattice:{w:e.w,h:e.h},row:0,col:0,snakeCount:6,snake:[],foodInfo:{x:0,y:0},path:"toRight",currentPath:39,time:10,timer:null,isAI:!1,isGrid:!0,difficult:200,diffData:[{label:"简单",value:200},{label:"正常",value:100},{label:"快",value:50},{label:"极快",value:30}]}},methods:{init:function(){var t=this;this.context=this.$refs.canvasDom.getContext("2d");var i=this.$refs.canvasDom;this.width=i.clientWidth,this.height=i.clientHeight,this.row=this.width/this.lattice.w,this.col=this.height/this.lattice.h,i.width=this.width,i.height=this.height,this.context.fillRect(this.foodInfo.x,this.foodInfo.y,this.row,this.col),this.addSnake(),this.addFood(this.context),this.drawLine(this.context),clearInterval(this.timer),this.timer=setInterval((function(){t.move(t.context,t.path)}),this.difficult)},drawLine:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context,i=0;i<this.lattice.w;i++)t.strokeStyle=this.isGrid?"#ccc":"transparent",t.lineWidth=1,t.beginPath(),t.moveTo(0,this.row*i),t.lineTo(this.width,this.row*i),t.closePath(),t.stroke();for(var h=0;h<this.lattice.h;h++)t.strokeStyle=this.isGrid?"#ccc":"transparent",t.lineWidth=1,t.beginPath(),t.moveTo(this.col*h,0),t.lineTo(this.col*h,this.height),t.closePath(),t.stroke();for(var o=0;o<this.snakeCount;o++)t.fillStyle="#000",o===this.snakeCount-1&&(t.fillStyle="#f60"),t.fillRect(this.snake[o].x,this.snake[o].y,this.row,this.col);t.beginPath(),t.fillStyle="black",t.fillRect(this.foodInfo.x,this.foodInfo.y,this.row,this.col),t.closePath(),t.fill()},addFood:function(t){var i=this;this.foodInfo={x:Math.floor(Math.random()*this.lattice.w)*this.row,y:Math.floor(Math.random()*this.lattice.h)*this.col};var h=this.snake.some((function(t){return t.x===i.foodInfo.x&&t.y===i.foodInfo.y}));h&&this.addFood(t)},addSnake:function(){var t=Math.floor(Math.random()*this.lattice.h)*this.col,i=Math.floor(Math.random()*this.lattice.w)*this.row;if(Math.random()>.5){this.path="toRight",this.currentPath=37;for(var h=0;h<this.snakeCount;h++)this.snake.push({x:h*this.row,y:t})}else{this.path="toBottom",this.currentPath=38;for(var o=0;o<this.snakeCount;o++)this.snake.push({x:i,y:o*this.col})}},move:function(t,i){var h=this.snake[this.snakeCount-1].x,o=this.snake[this.snakeCount-1].y;switch(i){case"toLeft":if(this.isAI&&this.AI(h-this.row,o))return;this.snake.push({x:h-this.row,y:o});break;case"toTop":if(this.AI(h,o-this.col))return;this.snake.push({x:h,y:o-this.col});break;case"toRight":if(this.isAI&&this.AI(h+this.row,o))return;this.snake.push({x:h+this.row,y:o});break;case"toBottom":if(this.isAI&&this.AI(h,o+this.col))return;this.snake.push({x:h,y:o+this.col});break;default:break}this.snake.shift(),t.clearRect(0,0,this.width,this.height),this.isEat(),this.gameOver(),this.drawLine(t)},isEat:function(){var t=this.snake[this.snake.length-1].x===this.foodInfo.x,i=this.snake[this.snake.length-1].y===this.foodInfo.y;t&&i&&(this.addFood(),this.snakeCount++,this.snake.unshift({x:-this.row,y:-this.col}))},AI:function(t,i){var h=this.snake.some((function(h){return h.x===t&&h.y===i}));return h?"toTop"===this.path||"toBottom"===this.path?(0!==t&&(this.path="toLeft"),void(0===t&&(this.path="toRight"))):"toLeft"===this.path||"toRight"===this.path?(0!==i&&(this.path="toTop"),void(0===i&&(this.path="toBottom"))):void 0:t<0&&i<0?("toTop"===this.path&&(this.path="toRight"),void("toLeft"===this.path&&(this.path="toBottom"))):t<0?(0!==i&&(i<=this.foodInfo.y&&("toLeft"===this.path||"toRight"===this.path)&&(this.path="toBottom"),i>this.foodInfo.y&&("toLeft"===this.path||"toRight"===this.path)&&(this.path="toTop")),0===i&&(this.path="toBottom"),!0):t>this.width-this.row?(0!==i&&(i<=this.foodInfo.y&&("toLeft"===this.path||"toRight"===this.path)&&(this.path="toBottom"),i>this.foodInfo.y&&("toLeft"===this.path||"toRight"===this.path)&&(this.path="toTop")),0===i&&(this.path="toBottom"),!0):i<0?(0!==t&&(t<=this.foodInfo.x&&("toTop"===this.path||"toBottom"===this.path)&&(this.path="toRight"),t>this.foodInfo.x&&("toTop"===this.path||"toBottom"===this.path)&&(this.path="toLeft")),0===t&&(this.path="toRight"),!0):i>this.height-this.col?(0!==t&&(t<=this.foodInfo.x&&("toTop"===this.path||"toBottom"===this.path)&&(this.path="toRight"),t>this.foodInfo.x&&("toTop"===this.path||"toBottom"===this.path)&&(this.path="toLeft")),0===t&&(this.path="toRight"),!0):t===this.foodInfo.x?(i<=this.foodInfo.y&&("toLeft"===this.path||"toRight"===this.path)&&(this.path="toBottom"),i>this.foodInfo.y&&("toLeft"===this.path||"toRight"===this.path)&&(this.path="toTop"),!1):i===this.foodInfo.y&&(t<=this.foodInfo.x&&("toTop"===this.path||"toBottom"===this.path)&&(this.path="toRight"),t>this.foodInfo.x&&("toTop"===this.path||"toBottom"===this.path)&&(this.path="toLeft"),!1)},keyDown:function(t){t=t||event,this.operating(t.keyCode)},operating:function(t){if(t!==this.currentPath)switch(Number(t)){case 37:this.path="toLeft",this.currentPath=39;break;case 38:this.path="toTop",this.currentPath=40;break;case 39:this.path="toRight",this.currentPath=37;break;case 40:this.path="toBottom",this.currentPath=38;break;default:break}},gameOver:function(){var t=this,i=this.snake.length-1,h=this.snake.some((function(h,o){return o!==i&&t.snake[i].x===h.x&&t.snake[i].y===h.y}));return this.snake[i].x<0||this.snake[i].x>=this.width||this.snake[i].y<0||this.snake[i].y>=this.height?(clearInterval(this.timer),this.timer=null,this.$warning("撞墙了"),!0):!!h&&(clearInterval(this.timer),this.timer=null,this.$warning("撞自己了"),!0)},clear:function(){clearInterval(this.timer),this.timer=null,this.path="toRight",this.snakeCount=6,this.snake=[],this.foodInfo={x:0,y:0},this.currentPath=39,this.isAI=!1},start:function(){this.clear(),this.init()}},mounted:function(){var t=this;if(!this.Utils.isPC()){var i=document.documentElement.clientWidth,h=document.documentElement.clientHeight,o=i>=h?h:i;this.$refs.canvasDom.style.width="".concat(o,"px"),this.$refs.canvasDom.style.height="".concat(o,"px"),this.lattice={w:30,h:30}}this.$nextTick((function(){window.addEventListener("keydown",t.keyDown,!0)}))},destroyed:function(){this.clear(),window.removeEventListener("keydown",this.keyDown,!0)}},n=a,r=(h("8644"),h("2877")),c=Object(r["a"])(n,o,s,!1,null,"ee50a626",null);i["default"]=c.exports},e8c4:function(t,i,h){}}]);
//# sourceMappingURL=chunk-2775f6bf.aa548e3c.js.map