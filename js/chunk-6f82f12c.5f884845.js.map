{"version":3,"sources":["webpack:///./src/views/fiveChess.vue?acee","webpack:///src/views/fiveChess.vue","webpack:///./src/views/fiveChess.vue?f398","webpack:///./src/views/fiveChess.vue","webpack:///./node_modules/core-js/modules/es.array.every.js","webpack:///./src/views/fiveChess.vue?1333"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","isFirst","isComputer","ref","on","$event","stopPropagation","chessClick","attrs","computeClick","initData","winner","_e","staticRenderFns","name","data","broad","row","col","initInfo","width","height","context","axis","modal","methods","clear","aiData","canvas","getContext","clientWidth","clientHeight","init","paintBroad","strokeStyle","lineWidth","beginPath","moveTo","i","lineTo","stroke","closePath","push","x","y","isBeing","chessType","paintChess","isOpponent","grd","addColorStop","fillStyle","arc","r","Math","PI","fill","axisData","isWin","computer","computeAxis","forEach","item","disR","child","obj","Object","assign","findArr","arr","itenIndex","win","winGame","winGameTypeRow","childIndex","type","text","index","winArr","length","every","Number","player","winGameTypeCol","ind","winGameTypeRight","winGameTypeLeft","count","allWin","j","myWin","compWin","computerChess","myScore","compScore","max","maxX","maxY","k","isBegin","n","itemIndex","mounted","Utils","isPC","$refs","canvasDom","style","component","$","$every","sloppyArrayMethod","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/chunk-6f82f12c.5f884845.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chess\"},[_c('div',{staticClass:\"box\"},[_c('h2',[_vm._v(\"五子棋 轮到 \"+_vm._s(_vm.isFirst?'黑棋':'白棋'))]),_c('h3',[_vm._v(\"当前 \"+_vm._s(!_vm.isComputer?'人人':'人机')+\"对战 鼠标左键操作\")]),_c('canvas',{ref:\"canvasDom\",on:{\"click\":function($event){$event.stopPropagation();return _vm.chessClick($event)}}}),_c('div',{staticClass:\"btn\"},[_c('fx-button',{attrs:{\"type\":\"default\"},on:{\"clickEvt\":_vm.computeClick}},[_vm._v(_vm._s(_vm.isComputer?'人人':'人机')+\"对战\")]),_c('fx-button',{attrs:{\"type\":\"default\"},on:{\"clickEvt\":_vm.initData}},[_vm._v(\"重置\")])],1)]),(_vm.modal)?_c('div',{staticClass:\"winner\",on:{\"click\":function($event){$event.stopPropagation();return _vm.initData($event)}}},[_c('p',[_vm._v(_vm._s(_vm.winner==='black'?'黑棋获胜':'白棋获胜'))])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"chess\">\r\n    <div class=\"box\">\r\n      <h2>五子棋 轮到 {{isFirst?'黑棋':'白棋'}}</h2>\r\n      <h3>当前 {{!isComputer?'人人':'人机'}}对战 鼠标左键操作</h3>\r\n      <canvas @click.stop=\"chessClick\" ref=\"canvasDom\"></canvas>\r\n      <div class=\"btn\">\r\n        <fx-button type=\"default\" @clickEvt=\"computeClick\">{{isComputer?'人人':'人机'}}对战</fx-button>\r\n        <fx-button type=\"default\" @clickEvt=\"initData\">重置</fx-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"winner\" v-if=\"modal\" @click.stop=\"initData\">\r\n      <p>{{winner==='black'?'黑棋获胜':'白棋获胜'}}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'fiveChess',\r\n  data() {\r\n    return {\r\n      // 棋盘 大小\r\n      broad: {\r\n        row: 21,\r\n        col: 21\r\n      },\r\n      // 初始化数据\r\n      initInfo: {\r\n        width: 0,\r\n        height: 0,\r\n        row: 0,\r\n        col: 0\r\n      },\r\n      // 画布\r\n      context: null,\r\n      // 坐标位置\r\n      axis: [],\r\n      // 是否是先手\r\n      isFirst: true,\r\n      // 胜利弹窗\r\n      modal: false,\r\n      // 胜利者\r\n      winner: '',\r\n      // 是否电脑\r\n      isComputer: true\r\n    }\r\n  },\r\n  methods: {\r\n    // 初始化数据\r\n    initData() {\r\n      this.clear()\r\n      this.aiData()\r\n      let canvas = this.$refs.canvasDom\r\n      this.context = canvas.getContext('2d')\r\n      this.initInfo.width = canvas.clientWidth\r\n      this.initInfo.height = canvas.clientHeight\r\n      this.initInfo.row = canvas.clientWidth / this.broad.row\r\n      this.initInfo.col = canvas.clientHeight / this.broad.col\r\n      this.init(canvas)\r\n      this.modal = false\r\n    },\r\n    // 初始化画布\r\n    init(canvas) {\r\n      canvas.width = canvas.clientWidth\r\n      canvas.height = canvas.clientHeight\r\n      this.paintBroad()\r\n    },\r\n    // 画棋盘\r\n    paintBroad(context = this.context) {\r\n      let canvas = this.$refs.canvasDom\r\n      // 画row\r\n      for (let i = 1; i < this.broad.row; i++) {\r\n        context.strokeStyle = '#000'\r\n        context.lineWidth = 1\r\n        context.beginPath()\r\n        context.moveTo(this.initInfo.col, this.initInfo.row * i)\r\n        context.lineTo(this.initInfo.width - this.initInfo.col, this.initInfo.row * i)\r\n        context.stroke()\r\n        context.closePath()\r\n      }\r\n      // 画col\r\n      for (let i = 1; i < this.broad.col; i++) {\r\n        context.strokeStyle = '#000'\r\n        context.lineWidth = 1\r\n        context.beginPath()\r\n        context.moveTo(this.initInfo.col * i, this.initInfo.row)\r\n        context.lineTo(this.initInfo.col * i, this.initInfo.height - this.initInfo.row)\r\n        context.stroke()\r\n        context.closePath()\r\n      }\r\n      // 设定点数据\r\n      const row = this.broad.row - 1\r\n      const col = this.broad.col - 1\r\n      const len = row * col\r\n      for (let i = 0; i < col; i++) {\r\n        this.axis.push([])\r\n        for (let j = 0; j < row; j++) {\r\n          this.axis[i].push({\r\n            x: ((j % row) + 1) * this.initInfo.row,\r\n            y: (i + 1) * this.initInfo.col,\r\n            isBeing: false,\r\n            chessType: 0\r\n          })\r\n        }\r\n      }\r\n    },\r\n    /* 画棋子\r\n     * x:画圆x轴\r\n     * y:画圆y轴\r\n     * isOpponent: 是否是对手棋子\r\n     */\r\n    paintChess(x, y, isOpponent = this.isFirst, context = this.context) {\r\n      let r = Math.min(this.initInfo.row, this.initInfo.col) / 2\r\n      context.beginPath()\r\n      let grd = context.createRadialGradient(x, y, 1, x, y, r)\r\n      if (!isOpponent) {\r\n        grd.addColorStop(0, '#fff')\r\n        grd.addColorStop(1, '#ccc')\r\n      } else {\r\n        grd.addColorStop(0, '#ccc')\r\n        grd.addColorStop(1, '#000')\r\n      }\r\n      context.fillStyle = grd\r\n      context.arc(x, y, r, 0, 2 * Math.PI)\r\n      context.fill()\r\n      context.closePath()\r\n      this.isFirst = !this.isFirst\r\n    },\r\n    // 下棋\r\n    chessClick(ev) {\r\n      let axisData = this.computeAxis(ev.offsetX, ev.offsetY)\r\n      if (axisData) this.paintChess(axisData.x, axisData.y)\r\n      let isWin = this.isWin()\r\n      if (isWin) {\r\n        this.winner = isWin\r\n        this.modal = true\r\n      }\r\n      if (this.isComputer) this.computer(axisData)\r\n    },\r\n    // 判断点击位置  \r\n    computeAxis(x, y) {\r\n      let obj = null\r\n      this.axis.forEach((item, itemIndex) => {\r\n        item.forEach((child, childIndex) => {\r\n          let disX = Math.abs(child.x - x)\r\n          let disY = Math.abs(child.y - y)\r\n          let disR = Math.sqrt(disX * disX + disY * disY)\r\n          const r = Math.min(this.initInfo.row, this.initInfo.col) / 2\r\n          if (disR <= r && !child.isBeing) {\r\n            obj = Object.assign(child, { row: itemIndex, col: childIndex })\r\n            child.isBeing = true\r\n            child.chessType = this.isFirst ? 1 : 2\r\n          }\r\n        })\r\n      })\r\n      return obj\r\n    },\r\n    // 查看\r\n    findArr() {\r\n      let arr = []\r\n      this.axis.forEach((item, itenIndex) => {\r\n        arr.push([])\r\n        item.forEach(child => {\r\n          arr[itenIndex].push(child.chessType)\r\n        })\r\n      })\r\n      return arr\r\n    },\r\n    // 是否获胜\r\n    isWin() {\r\n      let arr = this.findArr()\r\n      let win = null\r\n      arr.forEach((item, itemIndex) => {\r\n        item.forEach((child, childIndex) => {\r\n          if (child === 2 && !win) win = this.winGame(arr, item, itemIndex, childIndex, 2)\r\n          if (child === 1 && !win) win = this.winGame(arr, item, itemIndex, childIndex, 1)\r\n        })\r\n      })\r\n      return win\r\n    },\r\n    winGame(arr, item, itemIndex, childIndex, type) {\r\n      let text = null\r\n      if (this.winGameTypeRow(item, childIndex, type) && !text)\r\n        text = type === 1 ? 'black' : 'white'\r\n      else if (this.winGameTypeCol(arr, itemIndex, childIndex, type) && !text)\r\n        text = type === 1 ? 'black' : 'white'\r\n      else if (this.winGameTypeRight(arr, itemIndex, childIndex, type) && !text)\r\n        text = type === 1 ? 'black' : 'white'\r\n      else if (this.winGameTypeLeft(arr, itemIndex, childIndex, type) && !text)\r\n        text = type === 1 ? 'black' : 'white'\r\n      return text\r\n    },\r\n    // 横向胜利方法\r\n    winGameTypeRow(arr, index, player) {\r\n      let winArr = []\r\n      for (let i = 1; i < 5; i++) {\r\n        if (arr[index + i]) winArr.push(arr[index + i])\r\n      }\r\n      if (winArr.length < 4) return false\r\n      return winArr.every(item => {\r\n        return item === Number(player)\r\n      })\r\n    },\r\n    // 纵向胜利方法\r\n    winGameTypeCol(arr, ind, index, player) {\r\n      let winArr = []\r\n      for (let i = 1; i < 5; i++) {\r\n        if (arr[ind + i] && arr[ind + i][index]) winArr.push(arr[ind + i][index])\r\n      }\r\n      if (winArr.length < 4) return false\r\n      return winArr.every(item => {\r\n        return item === Number(player)\r\n      })\r\n    },\r\n    // 右斜下向胜利方法\r\n    winGameTypeRight(arr, ind, index, player) {\r\n      let winArr = []\r\n      for (let i = 1; i < 5; i++) {\r\n        if (arr[ind + i] && arr[ind + i][index + i]) winArr.push(arr[ind + i][index + i])\r\n      }\r\n      if (winArr.length < 4) return false\r\n      return winArr.every(item => {\r\n        return item === Number(player)\r\n      })\r\n    },\r\n    // 左斜下向胜利方法\r\n    winGameTypeLeft(arr, ind, index, player) {\r\n      let winArr = []\r\n      for (let i = 1; i < 5; i++) {\r\n        if (arr[ind + i] && arr[ind + i][index - i]) winArr.push(arr[ind + i][index - i])\r\n      }\r\n      if (winArr.length < 4) return false\r\n      return winArr.every(item => {\r\n        return item === Number(player)\r\n      })\r\n    },\r\n    // 电脑\r\n    aiData() {\r\n      let row = this.broad.row - 1\r\n      let col = this.broad.col - 1\r\n      this.count = 0\r\n      this.allWin = []\r\n      for (let i = 0; i < row; i++) {\r\n        this.allWin[i] = []\r\n        for (let j = 0; j < col; j++) {\r\n          this.allWin[i][j] = []\r\n        }\r\n      }\r\n      for (let i = 0; i < row; i++) {\r\n        for (let j = 0; j < col - 4; j++) {\r\n          for (let k = 0; k < 5; k++) {\r\n            this.allWin[j + k][i][this.count] = true\r\n          }\r\n          this.count++\r\n        }\r\n      }\r\n      for (let i = 0; i < row; i++) {\r\n        for (let j = 0; j < col - 4; j++) {\r\n          for (let k = 0; k < 5; k++) {\r\n            this.allWin[i][j + k][this.count] = true\r\n          }\r\n          this.count++\r\n        }\r\n      }\r\n      for (let i = 0; i < row - 4; i++) {\r\n        for (let j = 0; j < col - 4; j++) {\r\n          for (let k = 0; k < 5; k++) {\r\n            this.allWin[i + k][j + k][this.count] = true\r\n          }\r\n          this.count++\r\n        }\r\n      }\r\n      for (let i = row - 1; i > 3; i--) {\r\n        for (let j = 0; j < row - 4; j++) {\r\n          for (let k = 0; k < 5; k++) {\r\n            this.allWin[i - k][j + k][this.count] = true\r\n          }\r\n          this.count++\r\n        }\r\n      }\r\n      this.myWin = []\r\n      this.compWin = []\r\n      for (let i = 0; i < this.count; i++) {\r\n        this.myWin[i] = 0\r\n        this.compWin[i] = 0\r\n      }\r\n    },\r\n    // 电脑下棋\r\n    computerChess() {\r\n      let myScore = []\r\n      let compScore = []\r\n      for (let i = 0; i < this.broad.row - 1; i++) {\r\n        myScore[i] = []\r\n        compScore[i] = []\r\n        for (let j = 0; j < this.broad.col - 1; j++) {\r\n          myScore[i][j] = 0\r\n          compScore[i][j] = 0\r\n        }\r\n      }\r\n      let max = 0\r\n      let maxX = 0\r\n      let maxY = 0\r\n      for (let i = 0; i < this.broad.row - 1; i++) {\r\n        for (let j = 0; j < this.broad.col - 1; j++) {\r\n          if (!this.axis[i][j].isBeing) {\r\n            for (let k = 0; k < this.count; k++) {\r\n              if (this.allWin[i][j][k]) {\r\n                if (this.myWin[k] === 1) {\r\n                  myScore[i][j] += 200\r\n                } else if (this.myWin[k] === 2) {\r\n                  myScore[i][j] += 500\r\n                } else if (this.myWin[k] === 3) {\r\n                  myScore[i][j] += 2000\r\n                } else if (this.myWin[k] === 4) {\r\n                  myScore[i][j] += 50000\r\n                }\r\n                if (this.compWin[k] === 1) {\r\n                  compScore[i][j] += 300\r\n                } else if (this.compWin[k] === 2) {\r\n                  compScore[i][j] += 800\r\n                } else if (this.compWin[k] === 3) {\r\n                  compScore[i][j] += 20000\r\n                } else if (this.compWin[k] === 4) {\r\n                  compScore[i][j] += 500000\r\n                }\r\n              }\r\n            }\r\n\r\n            if (myScore[i][j] > max) {\r\n              max = myScore[i][j]\r\n              maxX = i\r\n              maxY = j\r\n            }\r\n            if (compScore[i][j] > max) {\r\n              max = compScore[i][j]\r\n              maxX = i\r\n              maxY = j\r\n            }\r\n          }\r\n        }\r\n      }\r\n      let x = this.axis[maxX][maxY].x\r\n      let y = this.axis[maxX][maxY].y\r\n      let axisData = this.computeAxis(x, y)\r\n      if (axisData) this.paintChess(axisData.x, axisData.y)\r\n      let isWin = this.isWin()\r\n      if (isWin) {\r\n        this.winner = isWin\r\n        this.modal = true\r\n      }\r\n      for (var k = 0; k < this.count; k++) {\r\n        if (this.allWin[maxX][maxY][k]) {\r\n          this.compWin[k]++\r\n          this.myWin[k] = 6\r\n        }\r\n      }\r\n    },\r\n    // 清空数据\r\n    clear() {\r\n      this.context = null\r\n      this.axis = []\r\n      this.isFirst = true\r\n      this.modal = false\r\n      this.winner = ''\r\n    },\r\n    // 是否开始下棋\r\n    isBegin() {\r\n      let arr = this.findArr()\r\n      let obj = { n: 0 }\r\n      arr.forEach((item, itemIndex) => {\r\n        return item.forEach((child, childIndex) => {\r\n          if (child === 1) {\r\n            obj.n++\r\n            obj.row = itemIndex\r\n            obj.col = childIndex\r\n          }\r\n        })\r\n      })\r\n      return obj\r\n    },\r\n    // 电脑下棋\r\n    computer(axisData) {\r\n      if (!axisData) return;\r\n      for (var k = 0; k < this.count; k++) {\r\n        if (this.allWin[axisData.row][axisData.col][k]) {\r\n          this.myWin[k]++\r\n          this.compWin[k] = 6\r\n        }\r\n      }\r\n      let obj = this.isBegin()\r\n      if (obj.n === 1) {\r\n        let x =\r\n          Math.random() > 0.5\r\n            ? this.axis[obj.row - 1][obj.col].x\r\n            : this.axis[obj.row + 1][obj.col].x\r\n        let y =\r\n          Math.random() > 0.5\r\n            ? this.axis[obj.row - 1][obj.col].y\r\n            : this.axis[obj.row + 1][obj.col].y\r\n        let axisData = this.computeAxis(x, y)\r\n        if (axisData) this.paintChess(axisData.x, axisData.y)\r\n      } else {\r\n        this.computerChess()\r\n      }\r\n    },\r\n    // 切换人机 人人\r\n    computeClick() {\r\n      if (this.isBegin().n) return\r\n      this.isComputer = !this.isComputer\r\n    }\r\n  },\r\n  mounted() {\r\n    if (!this.Utils.isPC()) {\r\n      let clientW = document.documentElement.clientWidth;\r\n      let clientH = document.documentElement.clientHeight;\r\n      let clientDis = clientW >= clientH ? clientH : clientW;\r\n      this.$refs.canvasDom.style.width = `${clientDis}px`;\r\n      this.$refs.canvasDom.style.height = `${clientDis}px`;\r\n    }\r\n    this.initData()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.chess {\r\n  > .box {\r\n    width: fit-content;\r\n    height: fit-content;\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    text-align: center;\r\n    > h2 {\r\n      font-size: 20px;\r\n    }\r\n    > h3 {\r\n      padding: 10px 0;\r\n      font-size: 16px;\r\n    }\r\n    > canvas {\r\n      display: block;\r\n      width: 600px;\r\n      height: 600px;\r\n      border: 1px solid #ccc;\r\n      background-color: rgba(237, 182, 102, 0.7);\r\n      box-shadow: 0 0 20px 2px rgba(0, 0, 0, 0.5);\r\n    }\r\n    > .btn {\r\n      padding-top: 20px;\r\n    }\r\n  }\r\n  > .winner {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    > p {\r\n      width: fit-content;\r\n      height: fit-content;\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      left: 0;\r\n      margin: auto;\r\n      font-size: 48px;\r\n      background-color: #fff;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fiveChess.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fiveChess.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fiveChess.vue?vue&type=template&id=43f6eda6&scoped=true&\"\nimport script from \"./fiveChess.vue?vue&type=script&lang=js&\"\nexport * from \"./fiveChess.vue?vue&type=script&lang=js&\"\nimport style0 from \"./fiveChess.vue?vue&type=style&index=0&id=43f6eda6&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"43f6eda6\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $every = require('../internals/array-iteration').every;\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\n// `Array.prototype.every` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.every\n$({ target: 'Array', proto: true, forced: sloppyArrayMethod('every') }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fiveChess.vue?vue&type=style&index=0&id=43f6eda6&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fiveChess.vue?vue&type=style&index=0&id=43f6eda6&lang=less&scoped=true&\""],"sourceRoot":""}