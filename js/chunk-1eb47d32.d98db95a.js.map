{"version":3,"sources":["webpack:///./src/views/tetris.vue?1439","webpack:///./src/views/tetris.vue?bce1","webpack:///./src/config/tetrisConfig.js","webpack:///src/views/tetris.vue","webpack:///./src/views/tetris.vue?ff78","webpack:///./src/views/tetris.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","Utils","isPC","_e","ref","_l","item","index","key","refInFor","attrs","Math","floor","row","_s","integral","addNum","itemIndex","child","childIndex","style","color","nextType","on","startStopClick","pause","clear","$event","stopPropagation","preventDefault","phoneLeftClick","phoneRotateClick","phoneRightClick","staticRenderFns","TIME","blocks","name","data","time","currR","currC","currType","currDir","nextR","nextC","nextDir","nextList","shadow","col","axisList","gameList","blocksInfo","methods","easeBlock","canLeft","drawBlock","rotate","canRight","startOrStop","clearInterval","timer","setInterval","loop","length","init","initDom","Array","from","$nextTick","width","height","canFall","c","r","b","fall","checkFullRows","full","rows","push","showPop","$","i","className","popRows","addIntegral","clearClass","randInt","random","m","n","setTimeout","currentBlock","nextBlock","drawMap","dom","backgroundColor","isNext","border","document","getElementById","id","keydown","keyCode","pow","arr","size","$refs","integralDom","fontSize","clearTimeout","timerOut","String","gameDom","forEach","mounted","window","addEventListener","destroyed","removeEventListener","component"],"mappings":"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G,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAKdA,EAAO,GAAK,CACV,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAKdA,EAAO,GAAK,CACV,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAKdA,EAAO,GAAK,CACV,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAKdA,EAAO,GAAK,CACV,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KAKdA,EAAO,GAAK,CACV,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZ,CACE,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,KCnJd,WACA,GACEC,KAAM,SACNC,KAFF,WAGI,MAAO,CACLtB,SAAU,EACVC,OAAQ,EACRsB,KAAMJ,EACNK,MAAO,EACPC,MAAO,EACPC,SAAU,EACVC,QAAS,EACTC,MAAO,EACPC,MAAO,EACPtB,SAAU,EACVuB,QAAS,EACTC,SAAU,GACVrB,OAAO,EACPsB,OAAQ,GACRlC,IAAK,GACLmC,IAAK,GACLC,SAAU,GACVC,SAAU,GACVC,WAAY,CACVtC,IAAK,EACLmC,IAAK,GAEP3B,MAAO,CACb,UACA,UACA,UACA,UACA,UACA,UACA,aAWE+B,QAAS,CAEPtB,eAFJ,WAGUpC,KAAK+B,QACT/B,KAAK2D,YACD3D,KAAK4D,aAAf,WACM5D,KAAK6D,cAEPxB,iBARJ,WASUrC,KAAK+B,QACT/B,KAAK2D,YACL3D,KAAKgD,QAAU,CAAC,EAAG,EAAG,EAAG,GAAGhD,KAAKgD,SACjChD,KAAK8D,SACL9D,KAAK6D,cAEPvB,gBAfJ,WAgBUtC,KAAK+B,QACT/B,KAAK2D,YACD3D,KAAK+D,cAAf,WACM/D,KAAK6D,cAGPG,YAtBJ,WAuBMC,cAAcjE,KAAKkE,OACnBlE,KAAK+B,OAAS/B,KAAK+B,MACnB/B,KAAK+B,MAAQkC,cAAcjE,KAAKkE,OAASlE,KAAKkE,MAAQC,YAAYnE,KAAKoE,KAAMpE,KAAK4C,OAGpFd,eA5BJ,WA6BM,GAAI9B,KAAK+B,QAAU/B,KAAKwD,SAASa,OAG/B,OAFArE,KAAK+B,OAAQ,OACb/B,KAAKsE,OAGPtE,KAAKgE,eAEPO,QApCJ,WAoCA,WACMvE,KAAKuD,SAAWiB,MAAMC,KAAK,IAAID,MAAMxE,KAAKmB,IAAMnB,KAAKsD,MACrDtD,KAAK0E,WAAU,WACR,EAAb,eACU,EAAV,sDACU,EAAV,uDACU,EAAV,mCACY9D,EAAKc,MAAMiD,MAAQ,OACnB/D,EAAKc,MAAMkD,OAAS,eAM5B,KAlDJ,kKAmDA,qBAnDA,gCAmDA,eAnDA,OAqDA,IADA,iBACA,aAEA,IADA,uBACA,aACA,uBACA,wBAGA,sBACA,iBACA,iBACA,0BACA,4CAhEA,yGAmEIC,QAnEJ,SAmEA,KACM,IAAK,IAAIC,EAAI,EAAGA,EAAI9E,KAAKyD,WAAWH,IAAKwB,IACvC,IAAK,IAAIC,EAAI/E,KAAKyD,WAAWtC,IAAM,EAAG4D,GAAK,EAAGA,IAC5C,GAAKtC,EAAOzC,KAAK+C,UAAU/C,KAAKgD,SAAS+B,GAAGD,GAA5C,CACA,GAAI9E,KAAK6C,MAAQkC,EAAI,EAAI/E,KAAKsD,IAAM,EAAG,OAAO,EAC9C,GAAItD,KAAKwD,SAASxD,KAAK6C,MAAQkC,EAAI,GAAG/E,KAAK8C,MAAQgC,GAAGE,EAAG,OAAO,EAEpE,OAAO,GAGTC,KA7EJ,SA6EA,GACM,IAAK,IAAX,8BACQ,IAAK,IAAb,8BACU,GAAIxC,EAAOzC,KAAK+C,UAAU/C,KAAKgD,SAAS+B,GAAGD,GAAI,CAC7C,IAAZ,uCACY9E,KAAKwD,SAASxD,KAAK6C,MAAQkC,GAAG/E,KAAK8C,MAAQgC,GAAGE,EAAIA,EAClDhF,KAAKwD,SAASxD,KAAK6C,MAAQkC,GAAG/E,KAAK8C,MAAQgC,GAAGA,EAAI9E,KAAK+C,WAI/Da,QAvFJ,WAwFM,IAAK,IAAX,8BACQ,IAAK,IAAb,8BACU,GAAKnB,EAAOzC,KAAK+C,UAAU/C,KAAKgD,SAAS+B,GAAGD,GAA5C,CACA,GAAI9E,KAAK8C,MAAQgC,EAAI,EAAI,EAAG,OAAO,EACnC,GAAI9E,KAAKwD,SAASxD,KAAK6C,MAAQkC,GAAG/E,KAAK8C,MAAQgC,EAAI,GAAGE,EAAG,OAAO,EAEpE,OAAO,GAGTjB,SAjGJ,WAkGM,IAAK,IAAX,8BACQ,IAAK,IAAb,iCACU,GAAKtB,EAAOzC,KAAK+C,UAAU/C,KAAKgD,SAAS+B,GAAGD,GAA5C,CACA,GAAI9E,KAAK8C,MAAQgC,EAAI,EAAI9E,KAAKmB,IAAM,EAAG,OAAO,EAC9C,GAAInB,KAAKwD,SAASxD,KAAK6C,MAAQkC,GAAG/E,KAAK8C,MAAQgC,EAAI,GAAGE,EAAG,OAAO,EAEpE,OAAO,GAGTlB,OA3GJ,WA4GM,OAAQ9D,KAAK+C,UACX,KAAK,EACC/C,KAAK8C,MAAQ,GAAK9C,KAAKmB,MAAKnB,KAAK8C,MAAQ9C,KAAKmB,IAAM,GACpDnB,KAAK8C,OAAS,IAAG9C,KAAK8C,MAAQ,GAClC,MACF,QACM9C,KAAK8C,MAAQ,GAAK9C,KAAKmB,MAAKnB,KAAK8C,MAAQ9C,KAAKmB,IAAM,GACpDnB,KAAK8C,OAAS,IAAG9C,KAAK8C,MAAQ,GAClC,QAINoC,cAxHJ,WA2HM,IAFA,IACN,EADA,KAEA,6BACQC,GAAO,EACP,IAAK,IAAb,8CACYA,GAAMC,EAAKC,KAAKN,GAEtB,OAAOK,GAETE,QAlIJ,SAkIA,GACM,IAAK,IAAX,mBACQ,IAAK,IAAb,mBACUtF,KAAKuF,EAAEH,EAAKI,GAAK,IAAMV,GAAGW,UAAY,OAM5CC,QA3IJ,SA2IA,GACM1F,KAAK2F,YAAYP,GACjBpF,KAAK4F,aACL,IAAK,IAAX,mBACQ,IAAK,IAAb,kBACU,IAAK,IAAf,mBACY5F,KAAKwD,SAASuB,EAAI,GAAGD,GAAGE,EAAIhF,KAAKwD,SAASuB,GAAGD,GAAGE,EAChDhF,KAAKwD,SAASuB,EAAI,GAAGD,GAAGA,EAAI9E,KAAKwD,SAASuB,GAAGD,GAAGA,GAGxDe,QArJJ,SAqJA,KACM,OAAO5E,KAAKC,MAAMD,KAAK6E,UAAYC,EAAIC,IAAMA,GAE/C5B,KAxJJ,WAwJA,WACM,GAAIpE,KAAK6E,QAAQ7E,KAAK6C,MAAO7C,KAAK8C,OAChC9C,KAAK2D,cACH3D,KAAK6C,MACP7C,KAAK6D,gBACb,CAEQ,GADA7D,KAAKiF,OACc,IAAfjF,KAAK6C,MAGP,OAFA7C,KAAK6D,iBACLI,cAAcjE,KAAKkE,OAGrB,IAAR,uBACYkB,EAAKf,OAAS,IAChBrE,KAAKsF,QAAQF,GACba,YAAW,WACT,EAAZ,WACYA,YAAW,WACT,EAAd,YACA,OACA,MAEQjG,KAAKkG,eACLlG,KAAKmG,YACLnG,KAAK6D,cAGTuC,QAnLJ,WAoLM,IAAK,IAAX,mBACQ,IAAK,IAAb,oBACU,IAAV,kBACcpG,KAAKwD,SAASuB,GAAGD,GAAGE,EAClBqB,IAAKA,EAAI3E,MAAM4E,gBAAkBtG,KAAK2B,MAAM3B,KAAKwD,SAASuB,GAAGD,GAAGA,IAEhEuB,IAAKA,EAAI3E,MAAM4E,gBAAkB,iBAK7CJ,aA/LJ,WA+LA,iEACMlG,KAAK6C,MAAQ0D,EAASvG,KAAKiD,MAAQ,EACnCjD,KAAK8C,MAAQyD,EAASvG,KAAKkD,MAAQlD,KAAKmB,IAAM,EAAInB,KAAKyD,WAAWH,IAAM,EACxEtD,KAAK+C,SAAWwD,EAASvG,KAAK4B,SAAW5B,KAAK6F,QAAQ,EAAGpD,EAAO4B,QAChErE,KAAKgD,QAAUuD,EAASvG,KAAKmD,QAAUnD,KAAK6F,QAAQ,EAAG,IAGzDM,UAtMJ,WAuMMnG,KAAKiD,MAAQ,EACbjD,KAAKkD,MAAQlD,KAAKmB,IAAM,EAAInB,KAAKyD,WAAWH,IAAM,EAClDtD,KAAK4B,SAAW5B,KAAK6F,QAAQ,EAAGpD,EAAO4B,QACvCrE,KAAKmD,QAAUnD,KAAK6F,QAAQ,EAAG,GAC/B7F,KAAKoD,SAAWX,EAAOzC,KAAK4B,UAAU5B,KAAKmD,UAG7CU,UA9MJ,WA+MM,IAAK,IAAX,8BACQ,IAAK,IAAb,8BACU,GAAIpB,EAAOzC,KAAK+C,UAAU/C,KAAKgD,SAAS+B,GAAGD,GAAI,CAC7C,IAAZ,0CACgBuB,IAAKA,EAAI3E,MAAM4E,gBAAkBtG,KAAK2B,MAAM3B,KAAK+C,WACjDsD,IAAKA,EAAI3E,MAAM8E,OAAS,oBAKpC7C,UAzNJ,WA0NM,IAAK,IAAX,8BACQ,IAAK,IAAb,8BACU,GAAIlB,EAAOzC,KAAK+C,UAAU/C,KAAKgD,SAAS+B,GAAGD,GAAI,CAC7C,IAAZ,0CACgBuB,IAAKA,EAAI3E,MAAM4E,gBAAkB,eACjCD,IAAKA,EAAI3E,MAAM8E,OAAS,2BAIpCjB,EAnOJ,SAmOA,GACM,OAAOkB,SAASC,eAAeC,IAGjCC,QAvOJ,SAuOA,GACM,IAAN,YACW5G,KAAKwD,WACM,KAAZqD,GAA8B,KAAZA,GACpB7G,KAAK2D,YACW,KAAZkD,EACE7G,KAAK4D,aAAnB,WACA,QACc5D,KAAK+D,cAAnB,WAEQ/D,KAAK6D,aACb,QAEU7D,KAAK2D,YACL3D,KAAKgD,QAAU,CAAC,EAAG,EAAG,EAAG,GAAGhD,KAAKgD,SACjChD,KAAK8D,SACL9D,KAAK6D,aAEf,OACQ7D,KAAKoE,OACb,gBACQpE,KAAKgE,gBAIT2B,YAhQJ,SAgQA,cACM3F,KAAKsB,OAAmC,GAA1BL,KAAK6F,IAAI,EAAGC,EAAI1C,QAC9BrE,KAAKqB,UAAsC,GAA1BJ,KAAK6F,IAAI,EAAGC,EAAI1C,QACjC,IAAN,iCACM2C,EAAO,GAAKA,GAAQ,GAAK,GAAKA,EAAO,GACrChH,KAAKiH,MAAMC,YAAYxF,MAAMyF,SAAW,GAA9C,eACMC,aAAaC,GACbA,EAAWpB,YAAW,WACpB,EAAR,WACA,KAEUqB,OAAOtH,KAAKqB,UAAUgD,QAAU,IACpCJ,cAAcjE,KAAKkE,OACnBlE,KAAK4C,KAAOJ,EAAsC,GAA/B8E,OAAOtH,KAAKqB,UAAUgD,OACrCrE,KAAK4C,MAAQ,KAAI5C,KAAK4C,KAAO,IACjC5C,KAAKkE,MAAQC,YAAYnE,KAAKoE,KAAMpE,KAAK4C,QAG3CZ,MAlRJ,WAmRMiC,cAAcjE,KAAKkE,OACnBlE,KAAK2D,YACL3D,KAAKqB,SAAW,EAChBrB,KAAKsB,OAAS,EACdtB,KAAK4C,KAAOJ,EACZxC,KAAKoD,SAAW,GAChBpD,KAAKuD,SAAW,GAChBvD,KAAK+B,OAAQ,EACb/B,KAAKqD,OAAS,GACdrD,KAAKwD,SAAW,IAElBoC,WA9RJ,WA+RM5F,KAAKiH,MAAMM,QAAQC,SAAQ,SAAjC,GACQ5G,EAAK6E,UAAY,QAIvBgC,QAhVF,WAiVIxD,cAAcjE,KAAKkE,OACnBlE,KAAKuE,UACLmD,OAAOC,iBAAiB,UAAW3H,KAAK4G,SAAS,IAEnDgB,UArVF,WAsVI5H,KAAKgC,QACLiC,cAAcjE,KAAKkE,OACnBwD,OAAOG,oBAAoB,UAAW7H,KAAK4G,SAAS,KC1YwR,I,wBCQ5UkB,EAAY,eACd,EACAhI,EACAyC,GACA,EACA,KACA,WACA,MAIa,aAAAuF,E","file":"js/chunk-1eb47d32.d98db95a.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tetris.vue?vue&type=style&index=0&id=4508f2d9&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tetris.vue?vue&type=style&index=0&id=4508f2d9&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tetris\"},[_c('span',{staticClass:\"wrapper\"},[_c('h2',[_vm._v(\"俄罗斯方块\")]),(_vm.Utils.isPC())?_c('p',[_vm._v(\"小键盘操作 上为反转方块 space / enter 可暂停游戏\")]):_vm._e(),(_vm.Utils.isPC())?_c('p',[_vm._v(\"游戏每100,1000,1000... 自动增加一次难度\")]):_vm._e(),_c('div',{staticClass:\"box\"},[_c('ul',{ref:\"gameBoxDom\",staticClass:\"game_box\"},_vm._l((_vm.axisList),function(item,index){return _c('li',{key:index,ref:\"gameDom\",refInFor:true,attrs:{\"id\":((Math.floor(index/_vm.row)) + \"-\" + (index%_vm.row))}})}),0),_c('div',{staticClass:\"info\"},[_c('div',{ref:\"integralDom\",staticClass:\"integral\"},[_vm._v(\" 得分\"+_vm._s(_vm.integral)+\" \"),(_vm.addNum)?_c('span',[_vm._v(\"+\"+_vm._s(_vm.addNum))]):_vm._e()]),_c('ul',{staticClass:\"next\"},_vm._l((_vm.nextList),function(item,itemIndex){return _c('li',{key:itemIndex},_vm._l((item),function(child,childIndex){return _c('span',{key:childIndex,style:({\n                'background-color':child?_vm.color[_vm.nextType]:'transparent',\n                'border-color':child?'#fff':'transparent',\n                })})}),0)}),0)])]),_c('div',{staticClass:\"btn\"},[_c('fx-button',{attrs:{\"type\":\"default\"},on:{\"clickEvt\":_vm.startStopClick}},[_vm._v(_vm._s(_vm.pause?'开始':'暂停'))]),_c('fx-button',{attrs:{\"type\":\"default\"},on:{\"clickEvt\":_vm.clear}},[_vm._v(\"结束游戏\")])],1),(!_vm.Utils.isPC())?_c('span',{staticClass:\"pos\"},[_c('span',{staticClass:\"click_ac\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.phoneLeftClick($event)}}},[_vm._v(\"左\")]),_c('span',{staticClass:\"click_ac\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.phoneRotateClick($event)}}},[_vm._v(\"旋转\")]),_c('span',{staticClass:\"click_ac\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.phoneRightClick($event)}}},[_vm._v(\"右\")])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const TIME = 500;\r\n\r\nexport const blocks = [];\r\n\r\n// I 竖棍\r\nblocks[0] = [\r\n  [\r\n    [1, 1, 1, 1],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 1, 0, 0]\r\n  ],\r\n  [\r\n    [1, 1, 1, 1],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 1, 0, 0]\r\n  ]\r\n];\r\n\r\n// L\r\nblocks[1] = [\r\n  [\r\n    [1, 0, 0, 0],\r\n    [1, 1, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [1, 1, 0, 0],\r\n    [1, 0, 0, 0],\r\n    [1, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [1, 1, 1, 0],\r\n    [0, 0, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [1, 1, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ]\r\n];\r\n\r\n// L 反方向\r\nblocks[2] = [\r\n  [\r\n    [1, 1, 1, 0],\r\n    [1, 0, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [1, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 0, 1, 0],\r\n    [1, 1, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [1, 0, 0, 0],\r\n    [1, 0, 0, 0],\r\n    [1, 1, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ]\r\n];\r\n\r\n// O 方块\r\nblocks[3] = [\r\n  [\r\n    [0, 1, 1, 0],\r\n    [0, 1, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 1, 0],\r\n    [0, 1, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 1, 0],\r\n    [0, 1, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 1, 0],\r\n    [0, 1, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ]\r\n];\r\n\r\n// S\r\nblocks[4] = [\r\n  [\r\n    [0, 1, 1, 0],\r\n    [1, 1, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [1, 0, 0, 0],\r\n    [1, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 1, 0],\r\n    [1, 1, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [1, 0, 0, 0],\r\n    [1, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ]\r\n];\r\n\r\n// T 三角\r\nblocks[5] = [\r\n  [\r\n    [0, 1, 0, 0],\r\n    [1, 1, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 0, 0],\r\n    [0, 1, 1, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [1, 1, 1, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 0, 0],\r\n    [1, 1, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ]\r\n];\r\n\r\n// Z\r\nblocks[6] = [\r\n  [\r\n    [1, 1, 0, 0],\r\n    [0, 1, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 0, 0],\r\n    [1, 1, 0, 0],\r\n    [1, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [1, 1, 0, 0],\r\n    [0, 1, 1, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ],\r\n  [\r\n    [0, 1, 0, 0],\r\n    [1, 1, 0, 0],\r\n    [1, 0, 0, 0],\r\n    [0, 0, 0, 0]\r\n  ]\r\n];\r\n","<template>\r\n  <span class=\"tetris\">\r\n    <span class=\"wrapper\">\r\n      <h2>俄罗斯方块</h2>\r\n      <p v-if=\"Utils.isPC()\">小键盘操作 上为反转方块 space / enter 可暂停游戏</p>\r\n      <p v-if=\"Utils.isPC()\">游戏每100,1000,1000... 自动增加一次难度</p>\r\n      <div class=\"box\">\r\n        <ul ref=\"gameBoxDom\" class=\"game_box\">\r\n          <li\r\n            v-for=\"(item,index) in axisList\"\r\n            :key=\"index\"\r\n            :id=\"`${Math.floor(index/row)}-${index%row}`\"\r\n            ref=\"gameDom\"\r\n          ></li>\r\n        </ul>\r\n        <div class=\"info\">\r\n          <div ref=\"integralDom\" class=\"integral\">\r\n            得分{{integral}}\r\n            <span v-if=\"addNum\">+{{addNum}}</span>\r\n          </div>\r\n          <ul class=\"next\">\r\n            <li v-for=\"(item,itemIndex) in nextList\" :key=\"itemIndex\">\r\n              <span\r\n                :style=\"{\r\n                  'background-color':child?color[nextType]:'transparent',\r\n                  'border-color':child?'#fff':'transparent',\r\n                  }\"\r\n                v-for=\"(child,childIndex) in item\"\r\n                :key=\"childIndex\"\r\n              ></span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"btn\">\r\n        <fx-button type=\"default\" @clickEvt=\"startStopClick\">{{pause?'开始':'暂停'}}</fx-button>\r\n        <fx-button type=\"default\" @clickEvt=\"clear\">结束游戏</fx-button>\r\n      </div>\r\n      <span v-if=\"!Utils.isPC()\" class=\"pos\">\r\n        <span class=\"click_ac\" @click.stop.prevent=\"phoneLeftClick\">左</span>\r\n        <span class=\"click_ac\" @click.stop.prevent=\"phoneRotateClick\">旋转</span>\r\n        <span class=\"click_ac\" @click.stop.prevent=\"phoneRightClick\">右</span>\r\n      </span>\r\n    </span>\r\n  </span>\r\n</template>\r\n\r\n<script>\r\nimport { blocks, TIME } from 'config/tetrisConfig.js'\r\nlet timerOut = null;\r\nexport default {\r\n  name: 'tetris',\r\n  data() {\r\n    return {\r\n      integral: 0, // 积分\r\n      addNum: 0, // 每次增加的积分\r\n      time: TIME, // 速度\r\n      currR: 0,\r\n      currC: 4,\r\n      currType: 0,\r\n      currDir: 0,\r\n      nextR: 0,\r\n      nextC: 4,\r\n      nextType: 0,\r\n      nextDir: 0,\r\n      nextList: [],\r\n      pause: true,\r\n      shadow: {},\r\n      row: 10,\r\n      col: 18,\r\n      axisList: [],\r\n      gameList: [],\r\n      blocksInfo: {\r\n        row: 4,\r\n        col: 4\r\n      },\r\n      color: [\r\n        \"#f23b37\",\r\n        \"#c262f9\",\r\n        \"#fcb062\",\r\n        \"#78dfff\",\r\n        \"#f6f72d\",\r\n        \"#7aed6a\",\r\n        \"#fe8eff\",\r\n        // \"rgba(153,153,153,.7)\",\r\n        // \"rgba(153,153,153,.7)\",\r\n        // \"rgba(153,153,153,.7)\",\r\n        // \"rgba(153,153,153,.7)\",\r\n        // \"rgba(153,153,153,.7)\",\r\n        // \"rgba(153,153,153,.7)\",\r\n        // \"rgba(153,153,153,.7)\"\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    // 移动端\r\n    phoneLeftClick() {\r\n      if (this.pause) return;\r\n      this.easeBlock();\r\n      if (this.canLeft())--this.currC;\r\n      this.drawBlock();\r\n    },\r\n    phoneRotateClick() {\r\n      if (this.pause) return;\r\n      this.easeBlock();\r\n      this.currDir = [1, 2, 3, 0][this.currDir];\r\n      this.rotate()\r\n      this.drawBlock();\r\n    },\r\n    phoneRightClick() {\r\n      if (this.pause) return;\r\n      this.easeBlock();\r\n      if (this.canRight())++this.currC;\r\n      this.drawBlock();\r\n    },\r\n    // 开始/暂停 游戏\r\n    startOrStop() {\r\n      clearInterval(this.timer)\r\n      this.pause = !this.pause;\r\n      this.pause ? clearInterval(this.timer) : this.timer = setInterval(this.loop, this.time);\r\n    },\r\n    // 开始/暂停 游戏 触发\r\n    startStopClick() {\r\n      if (this.pause && !this.gameList.length) {\r\n        this.pause = false;\r\n        this.init();\r\n        return;\r\n      }\r\n      this.startOrStop();\r\n    },\r\n    initDom() {\r\n      this.axisList = Array.from(new Array(this.row * this.col));\r\n      this.$nextTick(() => {\r\n        if (!this.Utils.isPC()) {\r\n          this.$refs.gameBoxDom.style.width = `${this.row * 20}px`;\r\n          this.$refs.gameBoxDom.style.height = `${this.col * 20}px`;\r\n          this.$refs.gameDom.forEach(item => {\r\n            item.style.width = `20px`;\r\n            item.style.height = `20px`;\r\n          })\r\n        }\r\n      })\r\n    },\r\n    // 初始化\r\n    async init() {\r\n      if (!this.axisList.length) await this.initDom();\r\n      this.gameList = [];\r\n      for (let r = 0; r < 18; r++) {\r\n        this.gameList.push([]);\r\n        for (let c = 0; c < 10; c++) {\r\n          this.gameList[r][c] = {};\r\n          this.gameList[r][c].b = 0;\r\n        }\r\n      }\r\n      this.currentBlock(false);\r\n      this.nextBlock();\r\n      this.drawBlock();\r\n      clearInterval(this.timer);\r\n      this.timer = setInterval(this.loop, this.time);\r\n    },\r\n    // 是否可以落下\r\n    canFall(currR, currC) {\r\n      for (var c = 0; c < this.blocksInfo.col; c++)\r\n        for (var r = this.blocksInfo.row - 1; r >= 0; r--) {\r\n          if (!blocks[this.currType][this.currDir][r][c]) continue;\r\n          if (this.currR + r + 1 > this.col - 1) return false;\r\n          if (this.gameList[this.currR + r + 1][this.currC + c].b) return false;\r\n        }\r\n      return true;\r\n    },\r\n    // 落下状态设置到map\r\n    fall(block) {\r\n      for (let r = 0; r < this.blocksInfo.row; r++)\r\n        for (let c = 0; c < this.blocksInfo.col; c++)\r\n          if (blocks[this.currType][this.currDir][r][c]) {\r\n            let b = blocks[this.currType][this.currDir][r][c];\r\n            this.gameList[this.currR + r][this.currC + c].b = b;\r\n            this.gameList[this.currR + r][this.currC + c].c = this.currType;\r\n          }\r\n    },\r\n    // 可以左移\r\n    canLeft() {\r\n      for (let r = 0; r < this.blocksInfo.row; r++)\r\n        for (let c = 0; c < this.blocksInfo.col; c++) {\r\n          if (!blocks[this.currType][this.currDir][r][c]) continue;\r\n          if (this.currC + c - 1 < 0) return false;\r\n          if (this.gameList[this.currR + r][this.currC + c - 1].b) return false;\r\n        }\r\n      return true;\r\n    },\r\n    // 可以右移\r\n    canRight() {\r\n      for (let r = 0; r < this.blocksInfo.row; r++)\r\n        for (let c = this.blocksInfo.col - 1; c >= 0; c--) {\r\n          if (!blocks[this.currType][this.currDir][r][c]) continue;\r\n          if (this.currC + c + 1 > this.row - 1) return false;\r\n          if (this.gameList[this.currR + r][this.currC + c + 1].b) return false;\r\n        }\r\n      return true;\r\n    },\r\n    // 旋转\r\n    rotate() {\r\n      switch (this.currType) {\r\n        case 0:\r\n          if (this.currC + 4 >= this.row) this.currC = this.row - 4;\r\n          if (this.currC <= 0) this.currC = 0;\r\n          break;\r\n        default:\r\n          if (this.currC + 3 >= this.row) this.currC = this.row - 3;\r\n          if (this.currC <= 0) this.currC = 0;\r\n          break;\r\n      }\r\n    },\r\n    // 获得满行的行位置\r\n    checkFullRows() {\r\n      let rows = [];\r\n      let full;\r\n      for (let r = this.currR; r < this.col; r++) {\r\n        full = true;\r\n        for (let c = 0; full && c < this.row; c++) full = this.gameList[r][c].b;\r\n        if (full) rows.push(r);\r\n      }\r\n      return rows;\r\n    },\r\n    showPop(rows) {\r\n      for (let i = 0; i < rows.length; i++) {\r\n        for (let c = 0; c < this.row; c++) {\r\n          this.$(rows[i] + \"-\" + c).className = 'pop';\r\n          // this.$(rows[i] + \"-\" + c).style.backgroundColor = \"transparent\";;\r\n        }\r\n      }\r\n    },\r\n    // 在map消除指定行位置的行\r\n    popRows(rows) {\r\n      this.addIntegral(rows);\r\n      this.clearClass();\r\n      for (let i = 0; i < rows.length; i++)\r\n        for (let r = rows[i] - 1; r >= 0; r--)\r\n          for (let c = 0; c < this.row; c++) {\r\n            this.gameList[r + 1][c].b = this.gameList[r][c].b;\r\n            this.gameList[r + 1][c].c = this.gameList[r][c].c;\r\n          }\r\n    },\r\n    randInt(n, m) {\r\n      return Math.floor(Math.random() * (m - n)) + n;\r\n    },\r\n    loop() {\r\n      if (this.canFall(this.currR, this.currC)) {\r\n        this.easeBlock();\r\n        ++this.currR;\r\n        this.drawBlock();\r\n      } else {\r\n        this.fall();\r\n        if (this.currR === 0) {\r\n          this.drawBlock();\r\n          clearInterval(this.timer);\r\n          return;\r\n        }\r\n        let rows = this.checkFullRows();\r\n        if (rows.length > 0) {\r\n          this.showPop(rows);\r\n          setTimeout(() => {\r\n            this.popRows(rows);\r\n            setTimeout(() => {\r\n              this.drawMap();\r\n            }, 100);\r\n          }, 100)\r\n        }\r\n        this.currentBlock();\r\n        this.nextBlock();\r\n        this.drawBlock();\r\n      }\r\n    },\r\n    drawMap() {\r\n      for (let r = 0; r < this.col; r++)\r\n        for (let c = 0; c < this.row; c++) {\r\n          let dom = this.$(r + \"-\" + c);\r\n          if (this.gameList[r][c].b) {\r\n            if (dom) dom.style.backgroundColor = this.color[this.gameList[r][c].c];\r\n          } else {\r\n            if (dom) dom.style.backgroundColor = \"transparent\";\r\n          }\r\n        }\r\n    },\r\n    // 当前 \r\n    currentBlock(isNext = true) {\r\n      this.currR = isNext ? this.nextR : 0;\r\n      this.currC = isNext ? this.nextC : this.row / 2 - this.blocksInfo.col / 2;\r\n      this.currType = isNext ? this.nextType : this.randInt(0, blocks.length);\r\n      this.currDir = isNext ? this.nextDir : this.randInt(0, 4);\r\n    },\r\n    // 下一个 \r\n    nextBlock() {\r\n      this.nextR = 0;\r\n      this.nextC = this.row / 2 - this.blocksInfo.col / 2;\r\n      this.nextType = this.randInt(0, blocks.length);\r\n      this.nextDir = this.randInt(0, 4);\r\n      this.nextList = blocks[this.nextType][this.nextDir];\r\n    },\r\n    // 绘制盒子样式\r\n    drawBlock() {\r\n      for (let r = 0; r < this.blocksInfo.row; r++)\r\n        for (let c = 0; c < this.blocksInfo.col; c++) {\r\n          if (blocks[this.currType][this.currDir][r][c]) {\r\n            let dom = this.$(this.currR + r + \"-\" + (this.currC + c));\r\n            if (dom) dom.style.backgroundColor = this.color[this.currType];\r\n            if (dom) dom.style.border = `1px solid #fff`;\r\n          }\r\n        }\r\n    },\r\n    // 清空所有盒子样式\r\n    easeBlock() {\r\n      for (let r = 0; r < this.blocksInfo.row; r++)\r\n        for (let c = 0; c < this.blocksInfo.col; c++) {\r\n          if (blocks[this.currType][this.currDir][r][c]) {\r\n            let dom = this.$(this.currR + r + \"-\" + (this.currC + c));\r\n            if (dom) dom.style.backgroundColor = \"transparent\";\r\n            if (dom) dom.style.border = \"1px solid transparent\";\r\n          }\r\n        }\r\n    },\r\n    $(id) {\r\n      return document.getElementById(id);\r\n    },\r\n    // 按键响应\r\n    keydown(ev) {\r\n      let keyCode = ev.keyCode;\r\n      if (!this.gameList) return;\r\n      if (keyCode === 37 || keyCode === 39) {\r\n        this.easeBlock();\r\n        if (keyCode === 37) {\r\n          if (this.canLeft())--this.currC;\r\n        } else if (keyCode === 39) {\r\n          if (this.canRight())++this.currC;\r\n        }\r\n        this.drawBlock();\r\n      } else if (keyCode === 38) {\r\n        if (true) {\r\n          this.easeBlock();\r\n          this.currDir = [1, 2, 3, 0][this.currDir];\r\n          this.rotate()\r\n          this.drawBlock();\r\n        }\r\n      } else if (keyCode === 40) {\r\n        this.loop();\r\n      } else if (keyCode === 13 || keyCode === 32) {\r\n        this.startOrStop();\r\n      }\r\n    },\r\n    // 加分\r\n    addIntegral(arr) {\r\n      this.addNum = Math.pow(2, arr.length) * 10;\r\n      this.integral += Math.pow(2, arr.length) * 10;\r\n      let size = String(this.integral).length / 2;\r\n      size = 21 - size >= 12 ? 21 - size : 12;\r\n      this.$refs.integralDom.style.fontSize = `${size}px`;\r\n      clearTimeout(timerOut);\r\n      timerOut = setTimeout(() => {\r\n        this.addNum = 0;\r\n      }, 2000)\r\n      // 增加难度\r\n      if (String(this.integral).length <= 2) return;\r\n      clearInterval(this.timer);\r\n      this.time = TIME - String(this.integral).length * 50;\r\n      if (this.time <= 50) this.time = 50;\r\n      this.timer = setInterval(this.loop, this.time);\r\n    },\r\n    // 结束游戏 清空数据\r\n    clear() {\r\n      clearInterval(this.timer);\r\n      this.easeBlock();\r\n      this.integral = 0;\r\n      this.addNum = 0;\r\n      this.time = TIME;\r\n      this.nextList = [];\r\n      this.axisList = [];\r\n      this.pause = true;\r\n      this.shadow = {};\r\n      this.gameList = [];\r\n    },\r\n    clearClass() {\r\n      this.$refs.gameDom.forEach(item => {\r\n        item.className = ''\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    clearInterval(this.timer);\r\n    this.initDom();\r\n    window.addEventListener('keydown', this.keydown, true);\r\n  },\r\n  destroyed() {\r\n    this.clear();\r\n    clearInterval(this.timer);\r\n    window.removeEventListener('keydown', this.keydown, true);\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@keyframes pop {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  20% {\r\n    opacity: 1;\r\n  }\r\n  40% {\r\n    opacity: 0;\r\n  }\r\n  60% {\r\n    opacity: 1;\r\n  }\r\n  80% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.tetris {\r\n  > .wrapper {\r\n    width: fit-content;\r\n    height: fit-content;\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    top: 0;\r\n    margin: auto;\r\n    text-align: center;\r\n    > .box {\r\n      display: flex;\r\n      padding-bottom: 20px;\r\n      > .game_box {\r\n        background-color: rgba(255, 255, 255, 0.7);\r\n        width: 300px;\r\n        height: 18 * 30px;\r\n        border: 1px solid #f60;\r\n        border-radius: 4px;\r\n        > li {\r\n          box-sizing: border-box;\r\n          width: 30px;\r\n          height: 30px;\r\n          float: left;\r\n          border: 1px solid transparent;\r\n          &.pop {\r\n            animation: pop 0.1s;\r\n            animation-fill-mode: forwards;\r\n          }\r\n        }\r\n      }\r\n      > .info {\r\n        font: bolder 20px / 30px \"微软雅黑\";\r\n        padding-left: 20px;\r\n        > .integral {\r\n          height: 30px;\r\n          position: relative;\r\n          > span {\r\n            display: block;\r\n            width: fit-content;\r\n            height: 30px;\r\n            text-align: center;\r\n            color: #f60;\r\n            font-size: 30px;\r\n            transform: translateX(100%);\r\n            position: absolute;\r\n            top: 0;\r\n            animation: goTops 2s ease;\r\n            animation-fill-mode: forwards;\r\n          }\r\n        }\r\n        > .next {\r\n          width: 4 * 30px;\r\n          height: 4 * 30px;\r\n          border: 1px solid #f60;\r\n          background-color: rgba(255, 255, 255, 0.7);\r\n          border-radius: 4px;\r\n          > li {\r\n            width: 100%;\r\n            height: 30px;\r\n            > span {\r\n              display: inline-block;\r\n              width: 30px;\r\n              height: 30px;\r\n              box-sizing: border-box;\r\n              border: 1px solid rgba(255, 255, 255, 0.7);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    > .pos {\r\n      margin-top: 20px;\r\n      height: 40px;\r\n      line-height: 40px;\r\n      display: flex;\r\n      border: 1px solid #ccc;\r\n      border-radius: 4px;\r\n      > span {\r\n        flex: 1;\r\n        background-color: rgba(255, 255, 255, 0.7);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tetris.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tetris.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tetris.vue?vue&type=template&id=4508f2d9&scoped=true&\"\nimport script from \"./tetris.vue?vue&type=script&lang=js&\"\nexport * from \"./tetris.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tetris.vue?vue&type=style&index=0&id=4508f2d9&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4508f2d9\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}