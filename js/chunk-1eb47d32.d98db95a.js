(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1eb47d32"],{"98f9":function(t,i,r){"use strict";var s=r("bf02"),e=r.n(s);e.a},a095:function(t,i,r){"use strict";r.r(i);var s=function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("span",{staticClass:"tetris"},[r("span",{staticClass:"wrapper"},[r("h2",[t._v("俄罗斯方块")]),t.Utils.isPC()?r("p",[t._v("小键盘操作 上为反转方块 space / enter 可暂停游戏")]):t._e(),t.Utils.isPC()?r("p",[t._v("游戏每100,1000,1000... 自动增加一次难度")]):t._e(),r("div",{staticClass:"box"},[r("ul",{ref:"gameBoxDom",staticClass:"game_box"},t._l(t.axisList,(function(i,s){return r("li",{key:s,ref:"gameDom",refInFor:!0,attrs:{id:Math.floor(s/t.row)+"-"+s%t.row}})})),0),r("div",{staticClass:"info"},[r("div",{ref:"integralDom",staticClass:"integral"},[t._v(" 得分"+t._s(t.integral)+" "),t.addNum?r("span",[t._v("+"+t._s(t.addNum))]):t._e()]),r("ul",{staticClass:"next"},t._l(t.nextList,(function(i,s){return r("li",{key:s},t._l(i,(function(i,s){return r("span",{key:s,style:{"background-color":i?t.color[t.nextType]:"transparent","border-color":i?"#fff":"transparent"}})})),0)})),0)])]),r("div",{staticClass:"btn"},[r("fx-button",{attrs:{type:"default"},on:{clickEvt:t.startStopClick}},[t._v(t._s(t.pause?"开始":"暂停"))]),r("fx-button",{attrs:{type:"default"},on:{clickEvt:t.clear}},[t._v("结束游戏")])],1),t.Utils.isPC()?t._e():r("span",{staticClass:"pos"},[r("span",{staticClass:"click_ac",on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.phoneLeftClick(i)}}},[t._v("左")]),r("span",{staticClass:"click_ac",on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.phoneRotateClick(i)}}},[t._v("旋转")]),r("span",{staticClass:"click_ac",on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.phoneRightClick(i)}}},[t._v("右")])])])])},e=[],n=(r("4160"),r("a630"),r("3ca3"),r("159b"),r("96cf"),r("89ba")),o=500,a=[];a[0]=[[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],a[1]=[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[1,1,0,0],[1,0,0,0],[1,0,0,0],[0,0,0,0]],[[1,1,1,0],[0,0,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]],a[2]=[[[1,1,1,0],[1,0,0,0],[0,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[1,0,0,0],[1,0,0,0],[1,1,0,0],[0,0,0,0]]],a[3]=[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]],a[4]=[[[0,1,1,0],[1,1,0,0],[0,0,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,1,1,0],[1,1,0,0],[0,0,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]]],a[5]=[[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[1,1,1,0],[0,1,0,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]]],a[6]=[[[1,1,0,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[1,0,0,0],[0,0,0,0]]];var c=null,h={name:"tetris",data:function(){return{integral:0,addNum:0,time:o,currR:0,currC:4,currType:0,currDir:0,nextR:0,nextC:4,nextType:0,nextDir:0,nextList:[],pause:!0,shadow:{},row:10,col:18,axisList:[],gameList:[],blocksInfo:{row:4,col:4},color:["#f23b37","#c262f9","#fcb062","#78dfff","#f6f72d","#7aed6a","#fe8eff"]}},methods:{phoneLeftClick:function(){this.pause||(this.easeBlock(),this.canLeft()&&--this.currC,this.drawBlock())},phoneRotateClick:function(){this.pause||(this.easeBlock(),this.currDir=[1,2,3,0][this.currDir],this.rotate(),this.drawBlock())},phoneRightClick:function(){this.pause||(this.easeBlock(),this.canRight()&&++this.currC,this.drawBlock())},startOrStop:function(){clearInterval(this.timer),this.pause=!this.pause,this.pause?clearInterval(this.timer):this.timer=setInterval(this.loop,this.time)},startStopClick:function(){if(this.pause&&!this.gameList.length)return this.pause=!1,void this.init();this.startOrStop()},initDom:function(){var t=this;this.axisList=Array.from(new Array(this.row*this.col)),this.$nextTick((function(){t.Utils.isPC()||(t.$refs.gameBoxDom.style.width="".concat(20*t.row,"px"),t.$refs.gameBoxDom.style.height="".concat(20*t.col,"px"),t.$refs.gameDom.forEach((function(t){t.style.width="20px",t.style.height="20px"})))}))},init:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.axisList.length){t.next=3;break}return t.next=3,this.initDom();case 3:for(this.gameList=[],i=0;i<18;i++)for(this.gameList.push([]),r=0;r<10;r++)this.gameList[i][r]={},this.gameList[i][r].b=0;this.currentBlock(!1),this.nextBlock(),this.drawBlock(),clearInterval(this.timer),this.timer=setInterval(this.loop,this.time);case 10:case"end":return t.stop()}}),t,this)})));function i(){return t.apply(this,arguments)}return i}(),canFall:function(t,i){for(var r=0;r<this.blocksInfo.col;r++)for(var s=this.blocksInfo.row-1;s>=0;s--)if(a[this.currType][this.currDir][s][r]){if(this.currR+s+1>this.col-1)return!1;if(this.gameList[this.currR+s+1][this.currC+r].b)return!1}return!0},fall:function(t){for(var i=0;i<this.blocksInfo.row;i++)for(var r=0;r<this.blocksInfo.col;r++)if(a[this.currType][this.currDir][i][r]){var s=a[this.currType][this.currDir][i][r];this.gameList[this.currR+i][this.currC+r].b=s,this.gameList[this.currR+i][this.currC+r].c=this.currType}},canLeft:function(){for(var t=0;t<this.blocksInfo.row;t++)for(var i=0;i<this.blocksInfo.col;i++)if(a[this.currType][this.currDir][t][i]){if(this.currC+i-1<0)return!1;if(this.gameList[this.currR+t][this.currC+i-1].b)return!1}return!0},canRight:function(){for(var t=0;t<this.blocksInfo.row;t++)for(var i=this.blocksInfo.col-1;i>=0;i--)if(a[this.currType][this.currDir][t][i]){if(this.currC+i+1>this.row-1)return!1;if(this.gameList[this.currR+t][this.currC+i+1].b)return!1}return!0},rotate:function(){switch(this.currType){case 0:this.currC+4>=this.row&&(this.currC=this.row-4),this.currC<=0&&(this.currC=0);break;default:this.currC+3>=this.row&&(this.currC=this.row-3),this.currC<=0&&(this.currC=0);break}},checkFullRows:function(){for(var t,i=[],r=this.currR;r<this.col;r++){t=!0;for(var s=0;t&&s<this.row;s++)t=this.gameList[r][s].b;t&&i.push(r)}return i},showPop:function(t){for(var i=0;i<t.length;i++)for(var r=0;r<this.row;r++)this.$(t[i]+"-"+r).className="pop"},popRows:function(t){this.addIntegral(t),this.clearClass();for(var i=0;i<t.length;i++)for(var r=t[i]-1;r>=0;r--)for(var s=0;s<this.row;s++)this.gameList[r+1][s].b=this.gameList[r][s].b,this.gameList[r+1][s].c=this.gameList[r][s].c},randInt:function(t,i){return Math.floor(Math.random()*(i-t))+t},loop:function(){var t=this;if(this.canFall(this.currR,this.currC))this.easeBlock(),++this.currR,this.drawBlock();else{if(this.fall(),0===this.currR)return this.drawBlock(),void clearInterval(this.timer);var i=this.checkFullRows();i.length>0&&(this.showPop(i),setTimeout((function(){t.popRows(i),setTimeout((function(){t.drawMap()}),100)}),100)),this.currentBlock(),this.nextBlock(),this.drawBlock()}},drawMap:function(){for(var t=0;t<this.col;t++)for(var i=0;i<this.row;i++){var r=this.$(t+"-"+i);this.gameList[t][i].b?r&&(r.style.backgroundColor=this.color[this.gameList[t][i].c]):r&&(r.style.backgroundColor="transparent")}},currentBlock:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.currR=t?this.nextR:0,this.currC=t?this.nextC:this.row/2-this.blocksInfo.col/2,this.currType=t?this.nextType:this.randInt(0,a.length),this.currDir=t?this.nextDir:this.randInt(0,4)},nextBlock:function(){this.nextR=0,this.nextC=this.row/2-this.blocksInfo.col/2,this.nextType=this.randInt(0,a.length),this.nextDir=this.randInt(0,4),this.nextList=a[this.nextType][this.nextDir]},drawBlock:function(){for(var t=0;t<this.blocksInfo.row;t++)for(var i=0;i<this.blocksInfo.col;i++)if(a[this.currType][this.currDir][t][i]){var r=this.$(this.currR+t+"-"+(this.currC+i));r&&(r.style.backgroundColor=this.color[this.currType]),r&&(r.style.border="1px solid #fff")}},easeBlock:function(){for(var t=0;t<this.blocksInfo.row;t++)for(var i=0;i<this.blocksInfo.col;i++)if(a[this.currType][this.currDir][t][i]){var r=this.$(this.currR+t+"-"+(this.currC+i));r&&(r.style.backgroundColor="transparent"),r&&(r.style.border="1px solid transparent")}},$:function(t){return document.getElementById(t)},keydown:function(t){var i=t.keyCode;this.gameList&&(37===i||39===i?(this.easeBlock(),37===i?this.canLeft()&&--this.currC:39===i&&this.canRight()&&++this.currC,this.drawBlock()):38===i?(this.easeBlock(),this.currDir=[1,2,3,0][this.currDir],this.rotate(),this.drawBlock()):40===i?this.loop():13!==i&&32!==i||this.startOrStop())},addIntegral:function(t){var i=this;this.addNum=10*Math.pow(2,t.length),this.integral+=10*Math.pow(2,t.length);var r=String(this.integral).length/2;r=21-r>=12?21-r:12,this.$refs.integralDom.style.fontSize="".concat(r,"px"),clearTimeout(c),c=setTimeout((function(){i.addNum=0}),2e3),String(this.integral).length<=2||(clearInterval(this.timer),this.time=o-50*String(this.integral).length,this.time<=50&&(this.time=50),this.timer=setInterval(this.loop,this.time))},clear:function(){clearInterval(this.timer),this.easeBlock(),this.integral=0,this.addNum=0,this.time=o,this.nextList=[],this.axisList=[],this.pause=!0,this.shadow={},this.gameList=[]},clearClass:function(){this.$refs.gameDom.forEach((function(t){t.className=""}))}},mounted:function(){clearInterval(this.timer),this.initDom(),window.addEventListener("keydown",this.keydown,!0)},destroyed:function(){this.clear(),clearInterval(this.timer),window.removeEventListener("keydown",this.keydown,!0)}},l=h,u=(r("98f9"),r("2877")),f=Object(u["a"])(l,s,e,!1,null,"4508f2d9",null);i["default"]=f.exports},bf02:function(t,i,r){}}]);
//# sourceMappingURL=chunk-1eb47d32.d98db95a.js.map